<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../../pico.min.css">
    <script src="../../javascript/LSControl.js"></script>
</head>

<body>
    <main class="container">
        <input type="text" placeholder="title" id="title">
        <input type="text" placeholder="author" id="author">
        <input type="text" placeholder="content" id="content" multiple>
        <input type="number" maxlength="6" placeholder="password" id="password">
        <button onclick="create()">Create</button>
    </main>
    <script>
        const titleInput = document.getElementById("title")
        const authorInput = document.getElementById("author")
        const passwordInput = document.getElementById("password")
        const contentInput = document.getElementById("content")

        function create() {
            if (titleInput.value === "" ||
                authorInput.value === "" ||
                passwordInput.value === "" ||
                contentInput.value === "") {
                alert("fields must not be empty")
            }
            else {


                let data = getLSData()
                let newSecret = {
                    id: `secret-${data.secrets.length}`,
                    title: titleInput.value,
                    author: authorInput.value,
                    content: contentInput.value,
                    password: passwordInput.value,
                    locked: true
                }

                titleInput.value = ""
                authorInput.value = ""
                passwordInput.value = ""
                contentInput.value = ""

                data.secrets.push(newSecret)
                setLSData(data)

                window.location.href = "../../"
                
            }
        }

    </script>
</body>

</html>