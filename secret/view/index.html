<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../../javascript/LSControl.js"></script>
    <link rel="stylesheet" href="../../pico.min.css">
</head>

<body>
    <main class="container">
        <h1 id="title"></h1>
        <h2 id="author">by: </h2>
        <textarea id="secretData"></textarea>
        <a href="../..">goBack</a>
    </main>
    <script>

        let temp = getTempLSData()

        if (typeof temp !== "string" || temp === null || temp === {}) {
            alert("choose a Secret To crack")
            window.location.href = "../.."
        }

        let secrets = getLSData()
        let secToView;
        for (secret of secrets.secrets) {
            if (secret.id === temp) {
                secToView = secret
                break
            }
        }

        if (secToView === null) {
            alert("InternalError: can't find secret")
            window.location.href = "../.."
        }

        const title = document.getElementsByTagName("title")[0]
        const h1Title = document.getElementById("title")
        const h1Author = document.getElementById("author")
        const output = document.getElementById("secretData")

        h1Title.innerHTML = `Viewing [${secToView.title}]`
        title.innerHTML = `Viewing [${secToView.title}]`
        h1Author.innerHTML = `By: [${secToView.author}]`
        output.value = secToView.content

    </script>
</body>

</html>